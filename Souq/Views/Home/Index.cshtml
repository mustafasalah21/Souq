@model Souq.Models.IndexVm

<style>
    :root {
        --brand: #5e41b1;
    }

    .btn-brand {
        background: var(--brand);
        border-color: var(--brand);
        color: #fff;
    }

        .btn-brand:hover {
            filter: brightness(.95);
            color: #fff;
        }

    .card-soft {
        border: 1px solid rgba(0,0,0,.06);
        border-radius: 16px;
        box-shadow: 0 10px 22px rgba(0,0,0,.06);
        background: #fff;
    }

    .cat-img {
        width: 72px;
        height: 72px;
        object-fit: cover;
        border-radius: 14px;
        box-shadow: 0 8px 18px rgba(0,0,0,.10);
    }

    .product-img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        display: block;
        background: #f6f6fb;
    }

    .clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .section-title h2 {
        font-weight: 800;
        color: var(--brand);
    }
</style>

<!-- ✅ Search (Simple) -->
<div class="container mt-4">
    <div class="card-soft p-3 p-md-4">
        <form action="/Home/ProudectSerch" method="get">
            <div class="input-group input-group-lg">
                <input type="text" name="aa" id="aa" class="form-control" placeholder="Search products..." />
                <button class="btn btn-brand" type="submit">
                    <i class="bi bi-search me-1"></i> Search
                </button>
            </div>
        </form>
    </div>
</div>

<!-- ✅ Categories -->
<section id="services" class="services section mt-5">
    <div class="container section-title text-center" data-aos="fade-up">
        <h2>Site Sections</h2>
        <p class="text-muted mb-0">Choose a category to browse products.</p>
    </div>

    <div class="container">
        <div class="row g-4">
            @foreach (var item in Model.Categories)
            {
                <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
                    <a href="/Home/Proudects/@item.Id" class="text-decoration-none text-dark">
                        <div class="cat-card p-3 p-sm-4 d-flex gap-3 align-items-center h-100">

                            <div class="cat-icon flex-shrink-0">
                                @* Photo = bootstrap icon name مثل: bi-laptop *@
                                @if (!string.IsNullOrWhiteSpace(item.Photo) && item.Photo.StartsWith("bi-"))
                                {
                                    <i class="bi @item.Photo"></i>
                                }
                                @* أو Photo = رابط/مسار صورة *@
                                else if (!string.IsNullOrWhiteSpace(item.Photo) &&
                                (item.Photo.StartsWith("/") || item.Photo.StartsWith("http")))
                                {
                                    <img src="@item.Photo" alt="@item.Name" />
                                }
                                else
                                {
                                    <i class="bi bi-grid"></i>
                                }
                            </div>

                            <div class="flex-grow-1">
                                <h5 class="fw-bold mb-1" style="color:var(--brand);">@item.Name</h5>
                                <p class="text-muted mb-0 clamp-2">
                                    @(string.IsNullOrWhiteSpace(item.Descrption) ? "Browse products in this category." : item.Descrption)
                                </p>
                            </div>

                            <div class="cat-arrow flex-shrink-0">
                                <i class="bi bi-arrow-right"></i>
                            </div>

                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</section>

<style>
    .cat-card {
        border-radius: 16px;
        border: 1px solid rgba(0,0,0,.06);
        box-shadow: 0 10px 22px rgba(0,0,0,.06);
        background: #fff;
        transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
        position: relative;
        overflow: hidden;
    }

        .cat-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(0,0,0,.10);
            border-color: rgba(94,65,177,.22);
        }

    .cat-icon {
        width: 56px;
        height: 56px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(94,65,177,.10);
        border: 1px solid rgba(94,65,177,.15);
    }

        .cat-icon i {
            font-size: 28px;
            line-height: 1;
            color: var(--brand);
        }

        .cat-icon img {
            width: 34px;
            height: 34px;
            object-fit: contain;
        }

    .cat-arrow {
        width: 38px;
        height: 38px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0,0,0,.04);
        transition: transform .25s ease, background .25s ease;
        color: rgba(0,0,0,.55);
    }

    .cat-card:hover .cat-arrow {
        transform: translateX(4px);
        background: rgba(94,65,177,.12);
        color: rgba(94,65,177,.95);
    }
</style>
<section id="portfolio" class="portfolio section mt-5">
    <div class="container section-title text-center" data-aos="fade-up">
        <h2>Products</h2>
        <p class="text-muted mb-0">View all products on the site</p>
    </div>

    <div class="container">
        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">

            <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
                <li data-filter="*" class="filter-active">All</li>
                @foreach (var cat in Model.Categories)
                {
                    <li data-filter=".cat-@cat.Id">@cat.Name</li>
                }
            </ul>

            <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">

                @foreach (var product in Model.Products)
                {
                    <div class="col-lg-4 col-md-6 portfolio-item isotope-item cat-@product.CatId">
                        <div class="card-soft overflow-hidden h-100 product-card">

                            <div class="position-relative overflow-hidden product-img-wrap">

                                <img src="@product.Photo" class="product-img" alt="@product.Name" />

                                <!-- ✅ Overlay فقط -->
                                <div class="p-overlay d-flex flex-column align-items-center justify-content-center gap-2">
                                    <a href="/Home/CuranntProduct/@product.Id" class="btn btn-light btn-sm">
                                        <i class="bi bi-eye me-1"></i> View
                                    </a>

                                    <a href="/Home/AddProductToCart/@product.Id" class="btn btn-brand btn-sm fw-semibold">
                                        <i class="bi bi-cart-plus me-1"></i> Add to Cart
                                    </a>
                                </div>

                            </div>

                            <!-- Content -->
                            <div class="p-3 text-center">
                                <h5 class="fw-bold mb-1">@product.Name</h5>
                                <p class="text-muted clamp-2 mb-0">@product.Describtion</p>
                            </div>

                        </div>
                    </div>
                }

            </div>

        </div>
    </div>
</section>

<style>
    .product-card {
        transition: transform .25s ease, box-shadow .25s ease;
        border-radius: 16px;
    }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(0,0,0,.10);
        }

    .product-img-wrap {
        position: relative;
    }

    .product-img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        display: block;
        transition: transform .35s ease;
        background: #f6f6fb;
    }

    .product-card:hover .product-img {
        transform: scale(1.05);
    }

    .p-overlay {
        position: absolute;
        inset: 0;
        background: rgba(0,0,0,.55);
        opacity: 0;
        transition: opacity .25s ease;
    }

    .product-card:hover .p-overlay {
        opacity: 1;
    }
</style>



<section id="testimonials" class="testimonials section light-background mt-5">
    <div class="container section-title" data-aos="fade-up">
        <h2>Visitors' opinion</h2>
        <p class="text-muted mb-0">What customers say about us</p>
    </div>

    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="swiper init-swiper" data-speed="600" data-delay="5000">

            <script type="application/json" class="swiper-config">
                {
                  "direction": "horizontal",
                  "loop": true,
                  "speed": 600,
                  "autoplay": { "delay": 5000 },
                  "slidesPerView": "auto",
                  "pagination": { "el": ".swiper-pagination", "type": "bullets", "clickable": true },
                  "breakpoints": {
                    "320": { "slidesPerView": 1, "spaceBetween": 20 },
                    "1200": { "slidesPerView": 3, "spaceBetween": 20 }
                  }
                }
            </script>

            <div class="swiper-wrapper">
                @foreach (var item in Model.Reviews)
                {
                    <div class="swiper-slide">
                        <div class="card-soft p-4">
                            <p class="mb-3">
                                <i class="bi bi-quote quote-icon-left"></i>
                                <span>@item.Description</span>
                                <i class="bi bi-quote quote-icon-right"></i>
                            </p>

                            <!-- ✅ صورة الزبون رجعت -->
                            <img src="assets/img/testimonials/testimonials-1.jpg"
                                 class="testimonial-img"
                                 alt="testimonial"
                                 style="width:70px;height:70px;object-fit:cover;border-radius:50%;">

                            <h5 class="fw-bold mt-3 mb-0">@item.Name</h5>
                            <div class="text-muted">@item.Subject</div>
                        </div>
                    </div>
                }
            </div>

            <div class="swiper-pagination"></div>
        </div>
    </div>
</section>

<!-- ✅ Latest products (simple) -->
<section id="pricing" class="pricing section mt-5">
    <div class="container section-title" data-aos="fade-up">
        <h2>Latest products</h2>
        <p class="text-muted mb-0">Latest added products</p>
    </div>

    <div class="container">
        <div class="row gy-4">
            @foreach (var item in Model.Latestproducts)
            {
                <div class="col-lg-4 col-md-6" data-aos="zoom-in" data-aos-delay="100">
                    <div class="card-soft overflow-hidden h-100">
                        <img src="@item.Photo" class="product-img" alt="@item.Name" />
                        <div class="p-3">
                            <h5 class="fw-bold mb-1">@item.Name</h5>
                            <p class="text-muted clamp-2 mb-2">@item.Describtion</p>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="text-muted">Price</span>
                                <span class="fw-bold text-success">@item.Price</span>
                            </div>
                            <a href="/Home/CuranntProduct/@item.Id" class="btn btn-brand w-100">
                                Buy Now
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- ✅ Contact (simple + مرتب) -->
<section id="contact" class="contact section mt-5">
    <div class="container section-title" data-aos="fade-up">
        <h2>Contact</h2>
        <p class="text-muted mb-0">Send us a message anytime</p>
    </div>

    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4">

            <div class="col-lg-6">
                <div class="row gy-3">

                    <div class="col-md-6">
                        <div class="card-soft p-3">
                            <i class="bi bi-geo-alt" style="color:var(--brand); font-size:26px;"></i>
                            <h5 class="fw-bold mt-2 mb-1">Address</h5>
                            <div class="text-muted">Palestine - Gaza</div>
                            <div class="text-muted">DirAl-Balah</div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card-soft p-3">
                            <i class="bi bi-telephone" style="color:var(--brand); font-size:26px;"></i>
                            <h5 class="fw-bold mt-2 mb-1">Phone</h5>
                            <div class="text-muted">+9725156725</div>
                            <div class="text-muted">+9705156725</div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card-soft p-3">
                            <i class="bi bi-envelope" style="color:var(--brand); font-size:26px;"></i>
                            <h5 class="fw-bold mt-2 mb-1">Email</h5>
                            <div class="text-muted">hdhxhh39@gmail.com</div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card-soft p-3">
                            <i class="bi bi-clock" style="color:var(--brand); font-size:26px;"></i>
                            <h5 class="fw-bold mt-2 mb-1">Open Hours</h5>
                            <div class="text-muted">Mon - Fri</div>
                            <div class="text-muted">9:00 AM - 05:00 PM</div>
                        </div>
                    </div>

                    <div class="col-12">
                        <div class="card-soft overflow-hidden">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d13620.850022581068!2d34.36434155!3d31.408270699999996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sar!2s!4v1767445246100!5m2!1sar!2s"
                                    width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy">
                            </iframe>
                        </div>
                    </div>

                </div>
            </div>

            <div class="col-lg-6">
                <div class="card-soft p-4">
                    <h4 class="fw-bold mb-3" style="color:var(--brand);">Send Review</h4>

                    <form id="reviewForm" asp-action="sendReview" asp-controller="Home" method="post">
                        <div class="row gy-3">
                            <div class="col-md-6">
                                <input type="text" name="Name" class="form-control" placeholder="Your Name" required>
                            </div>

                            <div class="col-md-6">
                                <input type="email" name="Email" class="form-control" placeholder="Your Email" required>
                            </div>

                            <div class="col-12">
                                <input type="text" name="Subject" class="form-control" placeholder="Subject" required>
                            </div>

                            <div class="col-12">
                                <textarea class="form-control" name="Description" rows="6" placeholder="Message" required></textarea>
                            </div>

                            <div class="col-12 text-center">
                                <button type="submit" class="btn btn-brand px-4 py-2">
                                    Send Message <i class="bi bi-send ms-1"></i>
                                </button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>

        </div>
    </div>
</section>

<script>
    document.getElementById("reviewForm")?.addEventListener("submit", function () {
        alert("Send Successfully ✅");
    });
</script>
